## chapter 15 웹 서비스와 네트워크

## 서비스의 성장

### 네트워크 분기점

- 작은 트래픽이면 아무 문제 없지만, 서비스는 지속적으로 성장한다. 네트워크 분기점을 체감하는 기준은 어떤 것들이 있을까?

  > - 1Gbps(라우터 성능 관점에서 사실은 30만pps(300Kpps)) 이상 -> PC라우터의 한계
  >
  > - 500호스트 이상 -> 1서브넷 한계
  > - 글로벌화 -> 1데이터 센터의 한계

  *참고:하테나에서 자신들이 **측정**한 값이다.*

##### 1Gbps의 한계

- 하테나에서는 PC라우터를 여러 대 병렬화하는 방향으로 노력하고 있다. 

  - 병렬화라는 말은 운영체제 상에서 한번 공부한 적이 있다. 

    : 여러 프로세스가 한가지의 일을 나누어 하는 것. 

    - 동시성과 비슷하지만 다른 말이다. 동시성은 사실 진정한 의미의 동시가 아니다.

##### 500 호스트의 한계

- 하나의 ARP 테이블 크기의 상한선은 900건 전후이다. 하지만 실제로 ARP테이블이 부하를 느끼는 기준은 한 서브넷 당 500건 전후이다. (실무적으로 업무하면서 체득하는 정보의 중요성)
  - ARP 테이블 : 스위치가 가지고 있는 IP주소와 MAC 주소간의 관계를 포함한 테이블. 매번 접속할 때마다 MAC주소를 달라고 요청하는 것은 비효율적이므로 ARP테이블을 둠으로써 그 비효율성을 해소한다.
- 위의 500건 전후라고 판단하는 기준은 동일 서브넷 상에서 호스트가 접속할 때마다 느끼는 CPU의 부하를 측정한 값도 포함.



#### 네트워크 구조 계층화

결국, 네트워크의 구조를 계층화 함으로써 네트워크가 견딜 수 있는 분기점의 기준을 늘린다.

일반적으로 3가지의 계층으로 나뉜다.

1. 가장 작은 것은 Access 계층(액세스 영역)
2. 그 다음이 Distribution 계층(디스트리뷰션 영역)
3. 가장 위가 Core 계층(코어영역) 또는 OSPF(Open Shortest Path First) 영역

- 가장 작은 서브넷에서 100대, 200대로 억제하고 디스트리뷰션을 1,000대 정도, 코어 전체로는 10,000대 정도 단위를 다룰수 있는 계층구조를 설계하는 것이 일반적이다.



#### 세계로 뻗어나갈 때

##### CDN 서버

- Content Delivery Network
- 세계 각지에 서버를 두고 거기에 미디어를 **캐싱** 시켜서 사용자가 가지러 갈 때에는 가장 가까운 CDN서버로 액세스해서 미디어를 다운로드하도록 한다.





_ _ _





