## Chapter 5. 대규모 데이터 처리 실전 입문 <sub>애플리케이션 개발의 급소</sub>

### 용도특화형 인덱싱

- *만일 운용하면서 새로운 비즈니스가 추가되었고, 이를 수행하기 위해서는 RDBMS의 한계가 보인다면 어떻게 할 것인가?* 라는 의문이 생길 수 있다. 그렇다고 이미 사용 중인 RDBMS를 포기할 수 없다. 과연 어떻게 할까?
- 간단히 얘기하면, **배치 처리로 RDBMS에서 데이터를 추출해서 별도의 인덱스 서버와 같은 것을 만들고, 이 인덱스 서버에 웹 애플리케이션에서 RPC(Remote Procedure Call) 등으로 액세스하는 방법**을 사용한다.



#### RPC, 웹 API

- RPC는 간단히 얘기하면 원격에서 직접 프로시져 콜, 혹은 시스템 콜을 사용할 수 있는 서버를 두고, 이를 위해 별도의 네트워크 프로토콜로 연결하는 것이다. 물리적으로 떨어진 원격의 서버를 바로 앞에서 사용하게끔 하는 기술인 것이다.이 개념은 발전하여 지금의 REST와 같은 개념이 되었다.
- RPC는 결국 별도의 프로토콜을 활용하여 원격의 메소드(함수)를 실행하는 것이므로, 일반적으로 웹에서 사용하는 HTTP프로토콜의 장점인 방화벽의 제약을 받지 않는다는 특성이 없다. 결국 내부 네트워크가 아닌 웹 상에서는 힘들다는 뜻이다. REST 는 메소으(함수)에 접근하는 요청 자체를 Uri에 담아 보내므로 HTTP프로토콜을 사용할 수 있다. 

결국 이 RPC통신을 통해 원격의 서버에 인덱싱(혹은 역인덱싱)한 데이터를 두고 빠르게 검색할 수 있도록 하는 하나의 기술이다. 

용도 특화형 인덱싱이 바로 RDBMS가 할 수 있는 다양한 기능이 아닌, 특정한 목적만으로 사용할 수 있도록 튜닝한 데이터 구조를 사용한다는 것이다. 즉, **그 용도에 맞는 기능만 사용하기 위한 것** 이라 해석하면 이해하기 쉬울 것 같다.



#### 하테나에서 사용하는 다양한 용도특화형 인덱싱

- 정규표현과 Trie 기반의 정규표현을 사용한 Common Prefix Search
- Complement Naive Bayes 알고리즘을 사용 - 문서에서 특정 단어의 출현 확률 검색 알고리즘
- 전문 검색엔진을 직접 구현함으로써, 스코어링(점수가 높은 검색어 찾기와 같은) 알고리즘을 쉽게 구현할 수 있다.

*만약 위의 세 가지 방법을 사용하지 않고 원하는 값을 얻으려면 (RDBMS만을 이용한다면) 얼마나 힘들까?*

### 이론과 실전 양쪽과의 싸움

- 실전적인 것

  *RDBMS에서 분산을 고려해 JOIN을 사용하지 않는 것* 과 같은 흔치 않은 '배드 노하우' 는 직접 서비스를 운용하며 겪은 여러 문제들을 해결하기 위한 대안으로 마련되어 있는 것으로, 실전적인 것이다.

- 이론적인 것

  앞서 역 인덱스의 스코어를 구하는 작업은 *벡터공간모델* 과 같이 고전적인 이론을 사용하면 매우 간단히 할 수 있다. 이렇듯 많은 문제들은 비교적 교과서에 실려 있는 고전적인 이론으로 풀리곤 한다.

  

  *대규모 웹 애플리케이션을 개발, 운용하려고 하면 이론과 실전 모두를 하지 않으면 안된다.* 이론과 실전 사이에서 균형을 잘 맞춰야 한다. 

  

  **실전적으로 운용하며 문제에 부딪히고, 이것을 해결하고자 하는 명확한 목적이 생기면, 당연스럽게 (알고리즘/데이터 구조와 같은)이론이 중요해지게 된다**. 

  

  > 지금까지 기가바이트 단위의 데이터 처리는 예를 보면서 설명했었다. 테라바이트, 페타바이트는 또 다른 세계라고도 했다. 그리고 일단은 메모리가 중요하다고 한 것과 분산할 것을 전제로 운용, 설계를 하자는 얘기. 그리고 적절한 알고리즘과 데이터 구조를 확실히 선택해야 한다고 하는 기본적인 내용이 중요했었다.

  